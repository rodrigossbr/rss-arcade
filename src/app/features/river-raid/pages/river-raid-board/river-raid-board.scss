// --- PALETA DE CORES RETRO (Atari 2600 Style) ---
$color-water: #2c3e50;  // Azul profundo (Modernizado)
$color-bank: #27ae60;   // Verde Grama
$color-bank-dark: #1e8449; // Borda da grama
$color-ship: #34495e;
$color-fuel: #d35400;
$color-bullet: #f1c40f;

:host {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background-color: #050505; // Fundo fora do jogo
  font-family: 'Segoe UI', monospace;
}

.player-jet, .entity, .bullet, .river-slice .bank {
  // Borda vermelha para ver onde o objeto realmente começa e termina
  outline: 1px solid rgba(255, 0, 0, 0.7) !important;
  background-color: rgba(255, 0, 0, 0.2) !important; // Fundo levemente vermelho
}

.arcade-wrapper {
  position: relative;
  box-shadow: 0 0 60px rgba(0, 0, 0, 0.8);
  border: 10px solid #222;
  border-radius: 4px;
}

.game-viewport {
  position: relative;
  background-color: $color-water;
  overflow: hidden; // Corta tudo que sai da tela

  // Grade sutil para sensação de velocidade
  background-image:
    linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size: 100% 40px, 40px 100%;
}

// --- CENÁRIO (RIO) ---
.river-slice {
  position: absolute;
  left: 0;
  width: 100%;
  // Crucial para performance na GPU
  will-change: transform;

  .bank {
    position: absolute;
    top: 0;
    height: 100%;
    background-color: $color-bank;

    // Profundidade 3D falsa
    border-left: 4px solid $color-bank-dark;
    border-right: 4px solid $color-bank-dark;

    &.left { left: 0; }
    &.right { right: 0; }
  }
}

// --- ENTIDADES (Inimigos e Itens) ---
.entity {
  position: absolute;
  top: 0;
  left: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  will-change: transform;

  // -- BARCO --
  &.ENEMY_SHIP {
    .sprite.ship {
      font-size: 2rem;
      filter: drop-shadow(2px 2px 0 rgba(0,0,0,0.5));
      transform: scaleX(-1); // Espelha se quiser
    }
  }

  // -- HELICÓPTERO --
  &.ENEMY_HELI {
    animation: float-heli 0.5s infinite alternate ease-in-out;

    .sprite.heli {
      font-size: 2.2rem;
      filter: drop-shadow(0 10px 5px rgba(0,0,0,0.3)); // Sombra no chão
    }
  }

  // -- COMBUSTÍVEL --
  &.FUEL {
    .fuel-tank {
      background: linear-gradient(to bottom, #e67e22, #d35400);
      width: 100%;
      height: 100%;
      border: 2px solid #fff;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 0 #a04000;

      .fuel-label {
        color: white;
        font-weight: 900;
        font-size: 0.7rem;
        letter-spacing: 1px;
      }
    }
  }
}

// --- TIROS ---
.bullet {
  position: absolute;
  top: 0;
  left: 0;
  width: 6px;
  height: 14px;
  background-color: $color-bullet;
  border-radius: 4px;
  box-shadow: 0 0 8px $color-bullet; // Glow
  z-index: 5;
  will-change: transform;
}

// --- JOGADOR ---
.player-jet {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 20;
  display: flex;
  flex-direction: column;
  align-items: center;
  will-change: transform;

  .jet-sprite {
    font-size: 2.5rem;
    line-height: 1;
    transform: rotate(-45deg);
    filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5));
    z-index: 2;
  }

  .jet-thrust {
    width: 6px;
    height: 15px;
    background: orange;
    border-radius: 50%;
    margin-top: -5px;
    z-index: 1;
    animation: thrust-anim 0.1s infinite alternate;
    box-shadow: 0 0 10px orange;
  }
}

// --- OVERLAY (MENU) ---
.overlay {
  position: absolute;
  inset: 0; // Top, left, right, bottom = 0
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(4px);
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;

  .message-box {
    text-align: center;
    color: white;
    animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);

    h1 {
      font-size: 3rem;
      margin: 0 0 20px;

      &.title-neon {
        color: #2ecc71;
        text-shadow: 0 0 20px rgba(46, 204, 113, 0.5);
      }
      &.title-crash {
        color: #e74c3c;
        text-shadow: 0 0 20px rgba(231, 76, 60, 0.5);
        animation: shake 0.5s;
      }
    }

    .final-score {
      margin-bottom: 30px;
      display: flex;
      flex-direction: column;

      small { color: #aaa; letter-spacing: 2px; }
      span { font-size: 2.5rem; font-weight: bold; }
    }

    .btn-start {
      background: white;
      color: black;
      border: none;
      padding: 15px 40px;
      font-size: 1.2rem;
      font-weight: 900;
      text-transform: uppercase;
      cursor: pointer;
      border-radius: 4px;
      transition: transform 0.2s, box-shadow 0.2s;

      &:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px white;
      }
    }

    .controls-hint {
      margin-top: 30px;
      color: #777;
      font-size: 0.9rem;
      border-top: 1px solid #333;
      padding-top: 20px;
    }
  }
}

// --- KEYFRAMES ---
@keyframes float-heli {
  from { transform: translateY(0) rotate(-2deg); }
  to { transform: translateY(-5px) rotate(2deg); }
}

@keyframes thrust-anim {
  from { height: 10px; opacity: 0.8; }
  to { height: 20px; opacity: 1; }
}

@keyframes pop-in {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}
